<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>漳平一中头像生成器</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">
</head>
<body>
<div id="origin" style="position: relative;display:inline-block;width:300px;height:300px;">
    <div style="position:absolute;">
        <img src="border.png" width="300" height="300"/>
    </div>
    <img id="img_origin" width="200" height="200" style="padding-left: 50px;padding-top: 50px"/>
</div>
<input type="file" name="file" id="file" style="display:none;"/>
<div id="show">
    <img id="img_result" width="300" height="300" style="display: none;"/>
</div>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script>
    let div_origin = document.getElementById("origin");
    let img_origin = document.getElementById("img_origin");
    let img_result = document.getElementById("img_result");

    document.getElementById("file").addEventListener("change", function () {
        let file = this.files[0];
        let reader = new FileReader();
        reader.onload = function () {
            img_origin.src = this.result;
            html2canvas(div_origin).then(function (canvas) {
                img_result.setAttribute("crossOrigin", 'Anonymous');
                img_result.src = canvas.toDataURL("image/png");
                img_result.style.display = 'inline-block';
                div_origin.style.display = 'none';
            });
        };
        reader.readAsDataURL(file);
    });
    div_origin.addEventListener("click", function () {
        document.getElementById("file").click();
    });
</script>
</body>
</html>
